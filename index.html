<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f766e" />
  <title>Automação Cultivo - KC868</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <main class="app">
    <header class="hero">
      <h1>Painel de Automação de Cultivo</h1>
    </header>

    <section class="card">
      <div class="row">
        <button id="connectBtn" type="button">Conectar Bluetooth</button>
        <button id="syncClockBtn" type="button" disabled>Sincronizar Hora</button>
        <button id="unpairBtn" type="button" class="secondary" disabled>Desconectar</button>
      </div>
      <p id="bleState" class="state">Desconectado</p>
      <p class="clock-line">
        <span id="clockBadge" class="clock-badge clock-unsynced">Nao sincronizado</span>
      </p>
      <p id="clockState" class="hint">Relógio não sincronizado</p>
      <p id="loadingBox" class="loading hidden"></p>
      <p class="hint">Passkey BLE: <strong>123456</strong></p>
      <p id="wifiAlert" class="alert hidden"></p>
    </section>

    <section class="card">
      <h2>Wi-Fi</h2>
      <div id="wifiConfiguredBox" class="hidden">
        <p class="wifi-label">Rede ativa/configurada:</p>
        <p id="configuredSsid" class="ssid-pill">-</p>
        <div class="row">
          <button id="clearBtn" type="button" class="secondary" disabled>Limpar Configuração</button>
        </div>
      </div>
      <div id="wifiConfigBox">
        <form id="wifiForm">
          <label for="ssid">SSID</label>
          <input id="ssid" name="ssid" required maxlength="64" autocomplete="off" />
          <label for="password">Senha</label>
          <input id="password" name="password" type="password" maxlength="64" />
          <div class="row">
            <button id="saveBtn" type="submit" disabled>Salvar e Conectar</button>
          </div>
        </form>
      </div>
    </section>

    <section class="tabs card">
      <div class="tab-head">
        <button class="tab-btn active" data-tab="tab1">Irrigação</button>
        <button class="tab-btn" data-tab="tab2">Tanque</button>
        <button class="tab-btn" data-tab="tab3">Tomadas</button>
      </div>

      <div id="tab1" class="tab-pane active">
        <h3>Programação de Irrigação</h3>
        <div class="grid-2">
          <div>
            <div id="irrigationRows" class="irrigation-list"></div>
            <div class="row">
              <button id="addIrrigationRowBtn" type="button" disabled>Adicionar horário</button>
              <button id="clearIrrigationRowsBtn" type="button" class="secondary" disabled>Limpar horários</button>
              <button id="saveIrrigationBtn" type="button" disabled>Salvar horários</button>
            </div>
          </div>
          <div>
            <div class="sensor-box">
              <strong>Sensor de Umidade 1</strong>
              <p id="hum1Value">- %</p>
            </div>
            <div class="sensor-box">
              <strong>Sensor de Umidade 2</strong>
              <p id="hum2Value">- %</p>
            </div>
          </div>
        </div>

        <div class="grid-2">
          <div class="inline-card">
            <label for="oxygenationLeadInput">Tempo de oxigenação antes da rega (min)</label>
            <input id="oxygenationLeadInput" type="number" min="0" max="240" />
            <button id="saveOxygenationLeadBtn" type="button" disabled>Salvar tempo</button>
          </div>
          <div class="inline-card">
            <label for="manualIrrigationMinutes">Irrigação manual (min)</label>
            <input id="manualIrrigationMinutes" type="number" min="1" max="720" />
            <button id="startManualIrrigationBtn" type="button" disabled>Acionar</button>
          </div>
        </div>
      </div>

      <div id="tab2" class="tab-pane">
        <h3>Supervisório do Tanque</h3>
        <table class="tbl">
          <tbody>
            <tr><th>PH</th><td id="phValue">-</td></tr>
            <tr><th>EC absoluta</th><td id="ecAbsValue">-</td></tr>
            <tr><th>EC relativa</th><td id="ecRelValue">-</td></tr>
            <tr><th>Entrada A1 (V)</th><td id="a1Value">-</td></tr>
            <tr><th>Entrada A2 (V)</th><td id="a2Value">-</td></tr>
          </tbody>
        </table>
        <div class="row">
          <button id="zeroEcBtn" type="button" disabled>Zerar EC relativa</button>
        </div>

        <div class="inline-card">
          <label for="manualOxyMinutes">Oxigenação manual (min)</label>
          <input id="manualOxyMinutes" type="number" min="1" max="720" />
          <button id="startManualOxyBtn" type="button" disabled>Acionar</button>
        </div>
      </div>

      <div id="tab3" class="tab-pane">
        <h3>Tomadas adicionais</h3>
        <div id="socketCards"></div>
      </div>
    </section>

  </main>
  <script src="./app.js" type="module"></script>
</body>
</html>
